{% extends "base.html" %}
{% block title %}Buy Tickets{% endblock %}
{% block content %}
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <h1 class="text-center fontmain">Purchase Tickets</h1>
    <div class="container mt-5">
        <div class="row g-0">
            <div class="col-md-3">
                <div class="card bg-transparent border-0 text-white mb-3 p-2">
                    <img src="{% static movie.image %}" class="card-img-top" alt="...">
                </div>
            </div>
            <div class="col-md-8">
                <div class="card-body">
                    <h3 class="card-title text-center fontbody">{{ movie.title }} at {{ showtime.time }}</h3>
                </div>
            <div class="accordion accordion-flush" id="accordionExample">
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button fontbody bg-danger" type="button" data-bs-toggle="collapse"
                                data-bs-target="#collapseOne"
                                aria-expanded="true" aria-controls="collapseOne">
                            Select Tickets
                        </button>
                    </h2>
                    <div id="collapseOne" class="accordion-collapse collapse show"
                         data-bs-parent="#accordionExample">
                        <div class="accordion-body">
                            <input type="number" name="quantity" min="1"
                                           max="{{ showtime.tickets_available }}"
                                           value="{{ ticket_quantity }}" class="form-control mb-2">
                                    <button type="submit" class="btn btn-danger fontbody">Next</button>
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                            Accordion Item #2
                        </button>
                    </h2>
                    <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
                        <div class="accordion-body">
                            <strong>This is the second item's accordion body.</strong> It is hidden by default,
                            until the
                            collapse plugin adds the appropriate classes that we use to style each element. These
                            classes
                            control the overall appearance, as well as the showing and hiding via CSS transitions.
                            You can
                            modify any of this with custom CSS or overriding our default variables. It's also worth
                            noting that
                            just about any HTML can go within the <code>.accordion-body</code>, though the
                            transition does limit
                            overflow.
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                            Accordion Item #3
                        </button>
                    </h2>
                    <div id="collapseThree" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
                        <div class="accordion-body">
                            <strong>This is the third item's accordion body.</strong> It is hidden by default, until
                            the
                            collapse plugin adds the appropriate classes that we use to style each element. These
                            classes
                            control the overall appearance, as well as the showing and hiding via CSS transitions.
                            You can
                            modify any of this with custom CSS or overriding our default variables. It's also worth
                            noting that
                            just about any HTML can go within the <code>.accordion-body</code>, though the
                            transition does limit
                            overflow.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

    <script>
    document.querySelectorAll('.next-btn').forEach(button => {
        button.addEventListener('click', function () {
            let nextTarget = this.getAttribute('data-bs-target');

            // Close all open accordion sections
            document.querySelectorAll('.accordion-collapse').forEach(section => {
                section.classList.remove('show');
            });

            // Open the next section
            document.querySelector(nextTarget).classList.add('show');
        });
    });
</script>

{% endblock %}



  <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <p></p>
    <h1 class="text-center fontmain">Purchase Tickets</h1>
    <div class="container mt-4">
        <div class="row g-0">
            <div class="col-md-3">
                <div class="card bg-transparent border-0 text-white mb-3 p-2">
                    <img src="{% static movie.image %}" class="card-img-top" alt="{{ movie.title }}">
                </div>
            </div>
            <div class="col-md-8">
                <div class="card-body">
                    <h3 class="card-title fontbody text-center">{{ movie.title }} at {{ showtime.time }}</h3>
                </div>
                <div class="accordion accordion-flush" id="ticketAccordion">
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingOne">
                            <button class="accordion-button fontbody bg-danger" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#ticketAccordion" aria-expanded="true">
                                Select Tickets
                            </button>
                        </h2>
                        <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne">
                            <div class="accordion-body fontbody">
                                        <input type="number" name="quantity" min="1"
                                           max="{{ showtime.tickets_available }}"
                                           value="{{ ticket_quantity }}" class="form-control mb-2">
                                    <button type="submit" class="btn btn-danger fontbody">Next</button>
                            </div>
                        </div>
                        </div>
                    <div class="accordion-item {% if ticket_quantity > 0 %} {% else %} disabled {% endif %}">
                        <h2 class="accordion-header" id="headingTwo">
                            <button class="accordion-button {% if ticket_quantity > 0 %} {% else %} disabled {% endif %}"
                                    type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo">
                                Step 2: Confirm Purchase
                            </button>
                        </h2>
                        <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo">
                            <div class="accordion-body">
                                <p><strong>Movie:</strong> {{ movie.title }}</p>
                                <p><strong>Showtime:</strong> {{ showtime.time }}</p>
                                <p><strong>Tickets:</strong> {{ ticket_quantity }}</p>
                                <form method="POST">
                                    {% csrf_token %}
                                    <input type="hidden" name="step" value="confirm_purchase">
                                    <button type="submit" class="btn btn-success">Confirm & Purchase</button>
                                </form>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

        </div>
    </div>































    {% load static %}
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <p></p>
    <h1 class="text-center fontmain">Purchase Tickets</h1>
    <div class="card bg-transparent border-0 text-white mb-3 p-2" style="">
        <div class="row g-0">
            <div class="col-md-3">
                <img src="{% static movie.image %}" class="img-fluid rounded-start" alt="{{ movie.title }}">
            </div>

            <div class="col-md-9">
                <div class="card bg-secondary text-white ms-3 p-3">
                    <h3 class="card-title text-center fontbody fw-bold">{{ movie.title }} at {{ showtime.time }}</h3>
                    <p></p>

                    <div class="card bg-dark text-white p-3">

                        <div class="d-flex justify-content-between align-items-center">
                            <h4 class="card-title fontbody mb-0">General Admission: $7</h4>

                            <div class="input-group" style="max-width: 200px;">
                                <button class="btn btn-danger" type="button"
                                        onclick="this.nextElementSibling.stepDown()">-
                                </button>
                                <input type="number" class="form-control text-center fontmain" name="quantity" value="1"
                                       min="1" max="{{ showtime.tickets_available }}">
                                <button class="btn btn-danger" type="button"
                                        onclick="this.previousElementSibling.stepUp()">+
                                </button>
                            </div>
                        </div>
                        <form action="#" method="get">
                            <input type="hidden" name="quantity" id="ticketQuantity" value="1">
                            <button type="submit" class="btn btn-danger">Proceed to Checkout</button>
                        </form>

                    </div>
                </div>
            </div>
        </div>
    </div>


<div class="container mt-4">
    <div class="row">
        <div class="col-md-4">
            <div class="card bg-secondary text-white p-3">
                <img src="{% static movie.image %}" class="img-fluid rounded-start" alt="{{ movie.title }}">
                <div class="card-body">
                    <h3 class="card-title text-center fontbody fw-bold">{{ movie.title }}</h3>
                    <div class="d-flex justify-content-between align-items-center">
                        <h4 class="card-title fontbody mb-0">General Admission: $7</h4>

                        <div class="input-group" style="max-width: 200px;">
                            <button class="btn btn-danger" type="button"
                                    onclick="this.nextElementSibling.stepDown()">-
                            </button>
                            <input type="number" class="form-control text-center fontmain" name="quantity" value="1"
                                   min="1" max="{{ showtime.tickets_available }}">
                            <button class="btn btn-danger" type="button"
                                    onclick="this.previousElementSibling.stepUp()">+
                            </button>
                        </div>
                    </div>
                    <form action="#" method="get">
                        <input type="hidden" name="quantity" id="ticketQuantity" value="1">
                        <button type="submit" class="btn btn-danger">Proceed to Checkout</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-8">
        <div class="accordion" id="ticketAccordion">
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingOne">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                        Select Tickets
                </h2>
            </div>
        </div>
    </div>
</div>